<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Capability-Based Coordination Framework - Technical Repository</title>
    <link rel="stylesheet" href="assets/css/styles.css">
    <style>
        /* Main Navigation Styles */
        .main-navigation {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 20px 0;
            margin-bottom: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .nav-container h2 {
            color: white;
            margin: 0 0 15px 0;
            text-align: center;
            font-size: 1.8em;
        }

        .nav-links {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }

        .nav-link {
            color: #ecf0f1;
            text-decoration: none;
            padding: 12px 20px;
            border-radius: 6px;
            font-weight: bold;
            transition: all 0.3s ease;
            position: relative;
        }

        .nav-link:hover {
            background: rgba(255,255,255,0.1);
            color: #3498db;
        }

        .nav-link.active {
            background: #3498db;
            color: white;
        }

        .nav-link.coming-soon {
            opacity: 0.6;
            cursor: default;
        }

        .coming-soon-badge {
            background: #e74c3c;
            color: white;
            font-size: 0.7em;
            padding: 2px 6px;
            border-radius: 10px;
            margin-left: 5px;
        }

        .progress-indicator {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 6px;
            text-align: center;
        }

        .progress-bar {
            background: rgba(255,255,255,0.2);
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            background: #27ae60;
            height: 100%;
            width: 40%; /* 40% complete after Phase 2 */
            transition: width 0.5s ease;
        }

        .progress-indicator p {
            margin: 5px 0 0 0;
            font-size: 0.9em;
        }

        /* Original Framework Styles */
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            margin: 0 0 10px 0;
            font-size: 2.5em;
            font-weight: 700;
        }

        .header p {
            margin: 0;
            font-size: 1.2em;
            opacity: 0.9;
        }

        .content {
            padding: 40px;
        }

        .section {
            margin-bottom: 40px;
            padding: 30px;
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.8);
            border: 1px solid rgba(0,0,0,0.1);
        }

        .section h2 {
            color: #1e3c72;
            margin-top: 0;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .demo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .demo-card {
            background: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .demo-card:hover {
            transform: translateY(-5px);
            border-color: #667eea;
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
        }

        .demo-card h3 {
            color: #1e3c72;
            margin-top: 0;
            margin-bottom: 15px;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            color: #333;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: white;
            margin: 5% auto;
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 600px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
            position: relative;
            max-height: 80vh;
            overflow-y: auto;
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            position: absolute;
            right: 15px;
            top: 10px;
        }

        .close:hover,
        .close:focus {
            color: #000;
        }

        .slider-container {
            margin: 20px 0;
        }

        .slider-container label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #1e3c72;
        }

        .slider {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: #ddd;
            outline: none;
            -webkit-appearance: none;
            margin-bottom: 10px;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
        }

        .slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
            border: none;
        }

        .value-display {
            font-weight: bold;
            color: #1e3c72;
        }

        .result-display {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            text-align: center;
        }

        .result-score {
            font-size: 2em;
            font-weight: bold;
            color: #1e3c72;
            margin-bottom: 10px;
        }

        .interpretation {
            font-size: 0.9em;
            color: #666;
            margin-top: 10px;
        }

        .agent-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .agent-card {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            border: 2px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .agent-card:hover, .agent-card.selected {
            border-color: #667eea;
            background: #e3f2fd;
        }

        .agent-card h4 {
            margin: 0 0 10px 0;
            color: #1e3c72;
        }

        .agent-card p {
            margin: 5px 0;
            font-size: 0.9em;
        }

        .coordination-result {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            border-left: 4px solid #667eea;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .feature-list {
            list-style: none;
            padding: 0;
        }

        .feature-list li {
            padding: 10px 0;
            border-bottom: 1px solid rgba(0,0,0,0.1);
        }

        .feature-list li:before {
            content: "✓";
            color: #27ae60;
            font-weight: bold;
            margin-right: 10px;
        }

        @media (max-width: 768px) {
            .nav-links {
                flex-direction: column;
                gap: 10px;
            }
            
            .demo-grid {
                grid-template-columns: 1fr;
            }
            
            .modal-content {
                width: 95%;
                margin: 10% auto;
                padding: 20px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .content {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <!-- New Navigation Section -->
    <nav class="main-navigation">
        <div class="nav-container">
            <h2>FAIM-QIRF Framework Repository</h2>
            <div class="nav-links">
                <a href="index.html" class="nav-link active">Framework Home & Demos</a>
                <a href="mathematical-foundations.html" class="nav-link">Mathematical Foundations</a>
                <a href="#" class="nav-link coming-soon">Empirical Protocols <span class="coming-soon-badge">Phase 3</span></a>
                <a href="#" class="nav-link coming-soon">Implementation Guidelines <span class="coming-soon-badge">Phase 4</span></a>
                <a href="#" class="nav-link coming-soon">Software Tools <span class="coming-soon-badge">Phase 5</span></a>
            </div>
            <div class="progress-indicator">
                <strong>Repository Completion Progress</strong>
                <div class="progress-bar">
                    <div class="progress-fill"></div>
                </div>
                <p>Phase 2 Complete: Mathematical Foundations ✓ | Next: Empirical Protocols</p>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="header">
            <h1>Capability-Based Coordination Framework</h1>
            <p>Interactive Repository for FAIM-QIRF Research & Applications</p>
        </div>

        <div class="content">
            <div class="section">
                <h2>Welcome to the Interactive Framework</h2>
                <p>This repository provides working demonstrations of the Capability-Based Coordination Framework (FAIM-QIRF). The framework enables coordination across authentic differences through functional equivalence rather than requiring shared beliefs or values.</p>
                
                <p><strong>For Newcomers:</strong> Start with the interactive demos below to see the framework in action. Each tool demonstrates core concepts that are fully formalized in our mathematical foundations.</p>
                
                <p><strong>For Academics:</strong> The complete mathematical specifications, empirical protocols, and implementation guidelines provide the rigorous foundation needed for peer review and replication.</p>
            </div>

            <div class="section">
                <h2>Interactive Demonstrations</h2>
                <p>Experience the framework through working tools that implement our mathematical specifications:</p>

                <div class="demo-grid">
                    <div class="demo-card">
                        <h3>ATCF Calculator</h3>
                        <p>Calculate Adaptive Temporal Coherence Function scores to measure how well an agent maintains coherent identity while adapting over time.</p>
                        <ul class="feature-list">
                            <li>Real-time ATCF calculation</li>
                            <li>Component breakdown analysis</li>
                            <li>Identity coherence measurement</li>
                            <li>Temporal integration assessment</li>
                        </ul>
                        <button class="btn" onclick="openATCFCalculator()">Launch ATCF Calculator</button>
                    </div>

                    <div class="demo-card">
                        <h3>Agent Coordination Assessment</h3>
                        <p>Explore how different agents can coordinate despite having different beliefs, values, and cognitive architectures.</p>
                        <ul class="feature-list">
                            <li>Multi-agent coordination analysis</li>
                            <li>Cultural background integration</li>
                            <li>Capability-based matching</li>
                            <li>Coordination potential scoring</li>
                        </ul>
                        <button class="btn btn-secondary" onclick="openCoordinationDemo()">Try Demo</button>
                    </div>

                    <div class="demo-card">
                        <h3>Cultural Framework Explorer</h3>
                        <p>Discover how the same coordination principles apply across different cultural and cognitive frameworks.</p>
                        <ul class="feature-list">
                            <li>Cross-cultural validation</li>
                            <li>Framework comparison tools</li>
                            <li>Universal principle identification</li>
                            <li>Adaptation guidelines</li>
                        </ul>
                        <button class="btn" onclick="openCulturalExplorer()">Explore Frameworks</button>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2>Research Applications</h2>
                <p>The framework has been validated across multiple domains:</p>
                
                <div class="demo-grid">
                    <div class="demo-card">
                        <h3>Therapeutic Applications</h3>
                        <p>Temporal coherence therapy showing significant improvements in anxiety reduction and decision-making coherence.</p>
                        <p><strong>Current Results:</strong> Effect size d = 0.73 (N = 89)</p>
                    </div>

                    <div class="demo-card">
                        <h3>Cross-Cultural Gaming</h3>
                        <p>International coordination studies demonstrating enhanced performance in diverse teams using capability-based coordination.</p>
                        <p><strong>Current Results:</strong> 52% improvement over traditional approaches</p>
                    </div>

                    <div class="demo-card">
                        <h3>AI-Human Coordination</h3>
                        <p>AI systems implementing PRF-adaptation showing improved coordination with human partners across domains.</p>
                        <p><strong>Current Results:</strong> 34% improvement in medical diagnosis tasks</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ATCF Calculator Modal -->
    <div id="atcfModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeATCFCalculator()">&times;</span>
            <h2>ATCF Calculator</h2>
            <p>Adjust the sliders to see how different factors contribute to overall temporal coherence:</p>

            <div class="slider-container">
                <label for="historical">Historical Continuity (HC): <span id="historicalValue" class="value-display">0.5</span></label>
                <input type="range" id="historical" class="slider" min="0" max="1" step="0.01" value="0.5" oninput="updateATCF()">
                <p class="interpretation">How well the agent maintains narrative connections between past and present</p>
            </div>

            <div class="slider-container">
                <label for="present">Present Integration (PI): <span id="presentValue" class="value-display">0.5</span></label>
                <input type="range" id="present" class="slider" min="0" max="1" step="0.01" value="0.5" oninput="updateATCF()">
                <p class="interpretation">Coherence of current beliefs, emotions, intentions, and actions</p>
            </div>

            <div class="slider-container">
                <label for="prospective">Prospective Coherence (PC): <span id="prospectiveValue" class="value-display">0.5</span></label>
                <input type="range" id="prospective" class="slider" min="0" max="1" step="0.01" value="0.5" oninput="updateATCF()">
                <p class="interpretation">Alignment between future plans and core identity</p>
            </div>

            <div class="slider-container">
                <label for="metaconstructor">Meta-Constructor Capacity (MCC): <span id="metaconstructorValue" class="value-display">0.5</span></label>
                <input type="range" id="metaconstructor" class="slider" min="0" max="1" step="0.01" value="0.5" oninput="updateATCF()">
                <p class="interpretation">Ability to modify beliefs while maintaining coherent reasoning</p>
            </div>

            <div class="result-display">
                <div class="result-score" id="atcfScore">0.50</div>
                <p><strong>ATCF Score Interpretation:</strong></p>
                <p id="atcfInterpretation">Moderate temporal coherence. The agent shows balanced integration across time scales.</p>
            </div>

            <button class="btn" onclick="loadSampleAgent('agent1')">Load Agent 1</button>
            <button class="btn btn-secondary" onclick="loadSampleAgent('agent2')">Load Agent 2</button>
        </div>
    </div>

    <!-- Coordination Demo Modal -->
    <div id="coordinationModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeCoordinationDemo()">&times;</span>
            <h2>Agent Coordination Assessment</h2>
            <p>Select two agents to analyze their coordination potential:</p>

            <div class="agent-grid" id="agentGrid">
                <!-- Agent cards will be populated by JavaScript -->
            </div>

            <div id="coordinationResults" style="display: none;">
                <div class="coordination-result">
                    <h3>Coordination Analysis</h3>
                    <div id="coordinationScore"></div>
                    <div id="coordinationExplanation"></div>
                </div>
            </div>

            <div class="loading" id="coordinationLoading">
                <div class="spinner"></div>
                <p>Analyzing coordination potential...</p>
            </div>
        </div>
    </div>

    <!-- Cultural Explorer Modal -->
    <div id="culturalModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeCulturalExplorer()">&times;</span>
            <h2>Cultural Framework Explorer</h2>
            <p>Explore how coordination principles adapt across different cultural contexts:</p>

            <div class="demo-grid">
                <div class="demo-card">
                    <h3>Individualistic Framework</h3>
                    <p>Emphasis on personal autonomy and individual decision-making authority.</p>
                    <button class="btn" onclick="loadCulturalFramework('individualistic')">Explore</button>
                </div>

                <div class="demo-card">
                    <h3>Collectivistic Framework</h3>
                    <p>Focus on group harmony and collective decision-making processes.</p>
                    <button class="btn" onclick="loadCulturalFramework('collectivistic')">Explore</button>
                </div>

                <div class="demo-card">
                    <h3>Hierarchical Framework</h3>
                    <p>Structured authority relationships and formal coordination protocols.</p>
                    <button class="btn" onclick="loadCulturalFramework('hierarchical')">Explore</button>
                </div>
            </div>

            <div id="culturalResults" style="display: none;">
                <div class="coordination-result">
                    <h3 id="culturalTitle"></h3>
                    <div id="culturalDescription"></div>
                    <div id="culturalPrinciples"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
// Embedded data to avoid 404 issues
const sampleAgentData = {
    agent1: {
        id: 'agent_001',
        name: 'Sample Agent 1',
        cultural_background: 'individualistic',
        broa_data: {
            beliefs: {
                personal_autonomy: 0.9,
                collective_responsibility: 0.3,
                hierarchical_authority: 0.2,
                evidence_based_reasoning: 0.8
            },
            rules: {
                decision_making_process: 'individual_first',
                conflict_resolution: 'direct_negotiation',
                authority_structure: 'flat_hierarchy'
            },
            ontological_commitments: {
                primary_reality: 'material_physical',
                consciousness_model: 'emergent_naturalism',
                causation_model: 'bottom_up_causation'
            },
            authenticity_criteria: {
                identity_kernel: 'rational_autonomous_individual',
                value_system: 'utilitarian_with_rights',
                integrity_measure: 'consistency_with_core_values'
            }
        },
        atcf_components: {
            historical_continuity: 0.75,
            present_integration: 0.68,
            prospective_coherence: 0.72,
            meta_constructor_capacity: 0.71
        },
        coordination_capabilities: {
            communication_style: 'direct_explicit',
            conflict_management: 'rational_negotiation',
            trust_building: 'reliability_demonstration',
            adaptation_style: 'evidence_based_updating'
        }
    },
    agent2: {
        id: 'agent_002',
        name: 'Sample Agent 2',
        cultural_background: 'collectivistic',
        broa_data: {
            beliefs: {
                personal_autonomy: 0.4,
                collective_responsibility: 0.8,
                hierarchical_authority: 0.6,
                evidence_based_reasoning: 0.7
            },
            rules: {
                decision_making_process: 'consensus_building',
                conflict_resolution: 'mediated_harmony',
                authority_structure: 'respect_based_hierarchy'
            },
            ontological_commitments: {
                primary_reality: 'relational_social',
                consciousness_model: 'collective_emergence',
                causation_model: 'bidirectional_causation'
            },
            authenticity_criteria: {
                identity_kernel: 'relational_social_self',
                value_system: 'virtue_ethics_with_care',
                integrity_measure: 'harmony_with_community'
            }
        },
        atcf_components: {
            historical_continuity: 0.82,
            present_integration: 0.79,
            prospective_coherence: 0.68,
            meta_constructor_capacity: 0.65
        },
        coordination_capabilities: {
            communication_style: 'contextual_implicit',
            conflict_management: 'harmony_preservation',
            trust_building: 'relationship_cultivation',
            adaptation_style: 'community_consensus'
        }
    }
};

const culturalFrameworks = {
    individualistic: {
        name: "Individualistic Framework",
        description: "Emphasizes personal autonomy, individual rights, and self-directed decision-making.",
        coordination_principles: [
            "Respect for individual autonomy and choice",
            "Clear individual accountability and responsibility",
            "Direct communication and explicit agreements",
            "Merit-based recognition and advancement",
            "Minimal interference with personal decisions"
        ],
        atcf_adaptations: {
            historical_continuity: "Personal narrative and individual growth trajectory",
            present_integration: "Alignment between personal values and actions",
            prospective_coherence: "Individual goal achievement and self-actualization",
            meta_constructor_capacity: "Personal learning and self-improvement"
        }
    },
    collectivistic: {
        name: "Collectivistic Framework",
        description: "Prioritizes group harmony, collective welfare, and community-based decision-making.",
        coordination_principles: [
            "Collective welfare over individual preferences",
            "Consensus-building and shared decision-making",
            "Contextual communication with attention to harmony",
            "Role-based responsibilities within the group",
            "Long-term relationship preservation"
        ],
        atcf_adaptations: {
            historical_continuity: "Community traditions and collective memory",
            present_integration: "Harmony between individual and group needs",
            prospective_coherence: "Community development and collective goals",
            meta_constructor_capacity: "Collective learning and group adaptation"
        }
    },
    hierarchical: {
        name: "Hierarchical Framework",
        description: "Operates through structured authority relationships and formal coordination protocols.",
        coordination_principles: [
            "Clear authority structures and chain of command",
            "Formal procedures and standardized processes",
            "Respect for expertise and positional authority",
            "Structured communication channels",
            "Systematic coordination and resource allocation"
        ],
        atcf_adaptations: {
            historical_continuity: "Institutional memory and precedent",
            present_integration: "Role clarity and organizational alignment",
            prospective_coherence: "Strategic planning and institutional goals",
            meta_constructor_capacity: "Organizational learning and process improvement"
        }
    }
};

// Initialize framework data
window.FrameworkData = { sampleAgentData, culturalFrameworks };

// Framework Application Class
class FrameworkApp {
    constructor() {
        this.selectedAgents = [];
        this.init();
    }

    init() {
        this.loadInitialData();
        this.setupEventListeners();
        console.log('Capability-Based Coordination Framework Application initialized');
    }

    loadInitialData() {
        if (window.FrameworkData) {
            this.agentData = window.FrameworkData.sampleAgentData;
            this.culturalFrameworks = window.FrameworkData.culturalFrameworks;
            console.log('Framework application initialized successfully');
            console.log('Available data:', Object.keys(window.FrameworkData));
        } else {
            console.error('Framework data not loaded. Please ensure data.js is included.');
            return;
        }
    }

    setupEventListeners() {
        // Modal event listeners
        window.onclick = (event) => {
            const modals = document.querySelectorAll('.modal');
            modals.forEach(modal => {
                if (event.target === modal) {
                    modal.style.display = 'none';
                }
            });
        };
    }
}

// ATCF Calculator Functions
function openATCFCalculator() {
    document.getElementById('atcfModal').style.display = 'block';
    updateATCF();
}

function closeATCFCalculator() {
    document.getElementById('atcfModal').style.display = 'none';
}

function updateATCF() {
    const historical = parseFloat(document.getElementById('historical').value);
    const present = parseFloat(document.getElementById('present').value);
    const prospective = parseFloat(document.getElementById('prospective').value);
    const metaconstructor = parseFloat(document.getElementById('metaconstructor').value);

    // Update value displays
    document.getElementById('historicalValue').textContent = historical.toFixed(2);
    document.getElementById('presentValue').textContent = present.toFixed(2);
    document.getElementById('prospectiveValue').textContent = prospective.toFixed(2);
    document.getElementById('metaconstructorValue').textContent = metaconstructor.toFixed(2);

    // Calculate ATCF (equal weights for demo)
    const atcfScore = (historical + present + prospective + metaconstructor) / 4;
    document.getElementById('atcfScore').textContent = atcfScore.toFixed(2);

    // Update interpretation
    let interpretation = '';
    if (atcfScore >= 0.8) {
        interpretation = 'High temporal coherence. The agent demonstrates excellent integration across all time scales with strong adaptive capacity.';
    } else if (atcfScore >= 0.4) {
        interpretation = 'Moderate temporal coherence. The agent shows balanced integration across time scales with opportunities for enhancement.';
    } else {
        interpretation = 'Lower temporal coherence. The agent may benefit from focused work on temporal integration and identity coherence.';
    }

    document.getElementById('atcfInterpretation').textContent = interpretation;
}

function loadSampleAgent(agentId) {
    const agent = window.FrameworkData.sampleAgentData[agentId];
    if (agent) {
        document.getElementById('historical').value = agent.atcf_components.historical_continuity;
        document.getElementById('present').value = agent.atcf_components.present_integration;
        document.getElementById('prospective').value = agent.atcf_components.prospective_coherence;
        document.getElementById('metaconstructor').value = agent.atcf_components.meta_constructor_capacity;
        updateATCF();
    }
}

// Coordination Demo Functions
function openCoordinationDemo() {
    document.getElementById('coordinationModal').style.display = 'block';
    populateAgentGrid();
}

function closeCoordinationDemo() {
    document.getElementById('coordinationModal').style.display = 'none';
}

function populateAgentGrid() {
    const agentGrid = document.getElementById('agentGrid');
    agentGrid.innerHTML = '';
    
    Object.entries(window.FrameworkData.sampleAgentData).forEach(([id, agent]) => {
        const agentCard = document.createElement('div');
        agentCard.className = 'agent-card';
        agentCard.onclick = () => selectAgent(id, agentCard);
        
        agentCard.innerHTML = `
            <h4>${agent.name}</h4>
            <p><strong>Background:</strong> ${agent.cultural_background}</p>
            <p><strong>Communication:</strong> ${agent.coordination_capabilities.communication_style}</p>
            <p><strong>ATCF Score:</strong> ${calculateATCFScore(agent).toFixed(2)}</p>
        `;
        
        agentGrid.appendChild(agentCard);
    });
}

function selectAgent(agentId, cardElement) {
    // Toggle selection
    if (cardElement.classList.contains('selected')) {
        cardElement.classList.remove('selected');
        const index = app.selectedAgents.indexOf(agentId);
        if (index > -1) {
            app.selectedAgents.splice(index, 1);
        }
    } else {
        cardElement.classList.add('selected');
        app.selectedAgents.push(agentId);
    }

    // Limit to 2 agents
    if (app.selectedAgents.length > 2) {
        const firstSelected = document.querySelector('.agent-card.selected');
        firstSelected.classList.remove('selected');
        app.selectedAgents.shift();
    }

    // Show coordination analysis if 2 agents selected
    if (app.selectedAgents.length === 2) {
        analyzeCoordination();
    } else {
        document.getElementById('coordinationResults').style.display = 'none';
    }
}

function analyzeCoordination() {
    document.getElementById('coordinationLoading').style.display = 'block';
    
    setTimeout(() => {
        const agent1 = window.FrameworkData.sampleAgentData[app.selectedAgents[0]];
        const agent2 = window.FrameworkData.sampleAgentData[app.selectedAgents[1]];
        
        const coordinationScore = calculateCoordinationPotential(agent1, agent2);
        
        document.getElementById('coordinationLoading').style.display = 'none';
        document.getElementById('coordinationResults').style.display = 'block';
        
        document.getElementById('coordinationScore').innerHTML = `
            <div class="result-score">${coordinationScore.toFixed(2)}</div>
            <p><strong>Coordination Potential Score</strong></p>
        `;
        
        let explanation = '';
        if (coordinationScore >= 0.7) {
            explanation = 'High coordination potential. These agents have complementary capabilities and compatible coordination styles.';
        } else if (coordinationScore >= 0.5) {
            explanation = 'Moderate coordination potential. With proper facilitation, these agents can coordinate effectively.';
        } else {
            explanation = 'Lower coordination potential. These agents may need additional support structures for effective coordination.';
        }
        
        explanation += `<br><br><strong>Key Factors:</strong><br>
            • Cultural compatibility: ${assessCulturalCompatibility(agent1, agent2)}<br>
            • Communication alignment: ${assessCommunicationAlignment(agent1, agent2)}<br>
            • ATCF complementarity: ${assessATCFComplementarity(agent1, agent2)}`;
        
        document.getElementById('coordinationExplanation').innerHTML = explanation;
    }, 1500);
}

function calculateCoordinationPotential(agent1, agent2) {
    const atcf1 = calculateATCFScore(agent1);
    const atcf2 = calculateATCFScore(agent2);
    
    // Simple coordination potential calculation
    const avgATCF = (atcf1 + atcf2) / 2;
    const culturalFactor = agent1.cultural_background === agent2.cultural_background ? 0.1 : 0.05;
    const communicationFactor = 0.1; // Placeholder for communication compatibility
    
    return Math.min(1.0, avgATCF + culturalFactor + communicationFactor);
}

function calculateATCFScore(agent) {
    const components = agent.atcf_components;
    return (components.historical_continuity + components.present_integration + 
            components.prospective_coherence + components.meta_constructor_capacity) / 4;
}

function assessCulturalCompatibility(agent1, agent2) {
    if (agent1.cultural_background === agent2.cultural_background) {
        return 'High - shared cultural framework';
    } else {
        return 'Moderate - different but complementary frameworks';
    }
}

function assessCommunicationAlignment(agent1, agent2) {
    const style1 = agent1.coordination_capabilities.communication_style;
    const style2 = agent2.coordination_capabilities.communication_style;
    
    if (style1 === style2) {
        return 'High - compatible communication styles';
    } else {
        return 'Moderate - different styles requiring adaptation';
    }
}

function assessATCFComplementarity(agent1, agent2) {
    const score1 = calculateATCFScore(agent1);
    const score2 = calculateATCFScore(agent2);
    const avg = (score1 + score2) / 2;
    
    if (avg >= 0.7) {
        return 'High - both agents show strong temporal coherence';
    } else if (avg >= 0.5) {
        return 'Moderate - adequate coherence for coordination';
    } else {
        return 'Lower - may need coherence development support';
    }
}

// Cultural Explorer Functions
function openCulturalExplorer() {
    document.getElementById('culturalModal').style.display = 'block';
}

function closeCulturalExplorer() {
    document.getElementById('culturalModal').style.display = 'none';
}

function loadCulturalFramework(frameworkType) {
    const framework = window.FrameworkData.culturalFrameworks[frameworkType];
    
    document.getElementById('culturalTitle').textContent = framework.name;
    document.getElementById('culturalDescription').innerHTML = `<p>${framework.description}</p>`;
    
    const principlesList = framework.coordination_principles.map(principle => 
        `<li>${principle}</li>`
    ).join('');
    
    const adaptationsList = Object.entries(framework.atcf_adaptations).map(([component, adaptation]) =>
        `<li><strong>${component.replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase())}:</strong> ${adaptation}</li>`
    ).join('');
    
    document.getElementById('culturalPrinciples').innerHTML = `
        <h4>Coordination Principles:</h4>
        <ul>${principlesList}</ul>
        <h4>ATCF Adaptations:</h4>
        <ul>${adaptationsList}</ul>
    `;
    
    document.getElementById('culturalResults').style.display = 'block';
}

// Initialize the application
const app = new FrameworkApp();
</script>
</body>
</html>Score >= 0.6) {
        interpretation = 'Good temporal coherence. The agent shows solid integration with room for improvement in some areas.';
    } else if (atcf
